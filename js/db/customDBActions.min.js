function setDbConf(){currentDB=getLocalStorageValue("currentDB"),(currentDB!==getLocalStorageValue("latestDB")||null===currentDB)&&(setLocalStorage("currentDB",DB_VERSION),setLocalStorage("latestDB",DB_VERSION),latestDB=DB_VERSION)}function getSelectedIDs(){let a=[];return Array.from(document.getElementsByClassName("chkChoose")).forEach(function(b){b.matches(".is-checked")&&a.push(parseInt(b.querySelectorAll("input")[0].id.replace("chk","")))}),a}function countTimetable(){let a=db.transaction(["timeTable"],"readonly").objectStore("timeTable").count();a.onsuccess=function(){0<a.result?(btnMultiple.innerHTML="<span class='mdi mdi-check-box-outline'></span>",hideCheckBoxes(),printTable(),dialogTimeTable.showModal()):showSnackbar(lngObject.noSpeakers)}}function hideCheckBoxes(){Array.from(document.getElementsByClassName("tdDel")).forEach(function(a){a.style.display="none"}),document.getElementById("thDel").classList.add("hiddenObject")}function showCheckBoxes(){Array.from(document.getElementsByClassName("tdDel")).forEach(function(a){a.style.display="block"}),document.getElementById("thDel").classList.remove("hiddenObject")}function printTable(){let a=document.getElementById("speakers");a.innerHTML="",results=[];let b=db.transaction(["timeTable"],"readwrite").objectStore("timeTable").openCursor();b.onsuccess=function(b){let c=b.target.result;if(c){let b="white";("yellow"===c.value.lastColor||"black"===c.value.lastColor||"white"===c.value.lastColor)&&(b="black");let d=c.value.lastColor;"black"===d&&(d="white");"green"===d?d="#60ad5e":"yellow"===d?d="#ffeb3b":"red"===d?d="#e53935":void 0;let e=getSeconds(c.value.time),f=getSeconds(c.value.min);f-30<=e&&e<f&&(d="#CCFFCC",b="black"),c.value.disqualified&&(d="black",b="white"),results.push({member:c.value.member,role:c.value.role,min:c.value.min,opt:c.value.opt,max:c.value.max,time:c.value.time,lastColor:c.value.lastColor,disqualified:c.value.disqualified}),a.innerHTML+=`<tr id="tr${c.value.id}" style="background:${d};color:${b}"><td class="tdDel mdl-data-table__cell--non-numeric hiddenObject"><label class="chkOpt chkChoose mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="chk${c.value.id}"><input type="checkbox" id="chk${c.value.id}" class="mdl-checkbox__input" checked="checked" /></label></td><td class="mdl-data-table__cell--non-numeric">${c.value.member}</td><td class="mdl-data-table__cell--non-numeric">${c.value.role}</td><td class="mdl-data-table__cell--non-numeric">${c.value.time}</td></tr>`,c.continue()}else refreshControls(),addCheckTaps()}}function addCheckTaps(){Array.from(document.querySelectorAll("[id^=chk]")).forEach(function(a){a.addEventListener("change",function(){document.getElementById("lblTickAll").MaterialCheckbox.uncheck()})})}function deleteTimetable(){dialogConfirm.showModal()}function deleteByIDs(){let a=getSelectedIDs(),b=db.transaction(["timeTable"],"readwrite");for(i=0;i<a.length;i++)b.objectStore("timeTable").delete(a[i]),document.getElementById(`tr${a[i]}`).style.display="none";refreshControls();let c=b.objectStore("timeTable").count();c.onsuccess=function(){0===c.result?(showSnackbar(lngObject.noSpeakers),dialogTimeTable.close()):addCheckTaps(),saveData()},dialogConfirm.close()}