function setDbConf(){currentDB=getLocalStorageValue("currentDB"),currentDB===getLocalStorageValue("latestDB")&&null!==currentDB||(setLocalStorage("currentDB",DB_VERSION),setLocalStorage("latestDB",DB_VERSION),latestDB=DB_VERSION)}function getSelectedIDs(){let e=[];return Array.from(document.getElementsByClassName("chkChoose")).forEach(function(t){t.matches(".is-checked")&&e.push(parseInt(t.querySelectorAll("input")[0].id.replace("chk","")))}),e}function countTimetable(){let e=db.transaction(["timeTable"],"readonly").objectStore("timeTable").count();e.onsuccess=function(){e.result>0?(imgMultiple.src="img/icons-svg/checkbox-outline.svg",hideCheckBoxes(),printTable(),dialogTimeTable.showModal()):showSnackbar(lngObject.noSpeakers)}}function hideCheckBoxes(){Array.from(document.getElementsByClassName("tdDel")).forEach(function(e){e.style.display="none"}),document.getElementById("thDel").classList.add("hiddenObject")}function showCheckBoxes(){Array.from(document.getElementsByClassName("tdDel")).forEach(function(e){e.style.display="block"}),document.getElementById("thDel").classList.remove("hiddenObject")}function printTable(){let e=document.getElementById("speakers");e.innerHTML="",results=[],db.transaction(["timeTable"],"readwrite").objectStore("timeTable").openCursor().onsuccess=function(t){let l=t.target.result;if(l){let t="white";"yellow"!==l.value.lastColor&&"black"!==l.value.lastColor&&"white"!==l.value.lastColor||(t="black");let a=l.value.lastColor;switch("black"===a&&(a="white"),a){case"green":a=greenBgnCss;break;case"yellow":a=defYellowBgn;break;case"red":a=defRedBgn}let c=getSeconds(l.value.time),o=getSeconds(l.value.min);o-30<=c&&c<o&&(a="#CCFFCC",t="black"),l.value.disqualified&&(a="black",t="white"),results.push({member:l.value.member,role:l.value.role,min:l.value.min,opt:l.value.opt,max:l.value.max,time:l.value.time,lastColor:l.value.lastColor,disqualified:l.value.disqualified}),e.innerHTML+=`<tr id="tr${l.value.id}" style="background:${a};color:${t}"><td class="tdDel mdl-data-table__cell--non-numeric hiddenObject"><label class="chkOpt chkChoose mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="chk${l.value.id}"><input type="checkbox" id="chk${l.value.id}" class="mdl-checkbox__input" checked="checked" /></label></td><td class="mdl-data-table__cell--non-numeric">${l.value.member}</td><td class="mdl-data-table__cell--non-numeric">${l.value.role}</td><td class="mdl-data-table__cell--non-numeric">${l.value.time}</td></tr>`,l.continue()}else refreshControls(),addCheckTaps()}}function addCheckTaps(){Array.from(document.querySelectorAll("[id^=chk]")).forEach(function(e){e.addEventListener("change",function(){document.getElementById("lblTickAll").MaterialCheckbox.uncheck()})})}function deleteTimetable(){dialogConfirm.showModal()}function deleteByIDs(){let e=getSelectedIDs(),t=db.transaction(["timeTable"],"readwrite");for(i=0;i<e.length;i++)t.objectStore("timeTable").delete(e[i]),document.getElementById(`tr${e[i]}`).style.display="none";refreshControls();let l=t.objectStore("timeTable").count();l.onsuccess=function(){0===l.result?(showSnackbar(lngObject.noSpeakers),dialogTimeTable.close()):addCheckTaps(),saveData()},dialogConfirm.close()}